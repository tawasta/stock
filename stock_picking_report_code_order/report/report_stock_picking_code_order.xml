<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <template id="report_stock_picking_code_order">
            <t t-foreach="docs" t-as="o">
                <t t-set="sort_by_default_code" t-value="True" />
                <t t-call="stock.report_picking" />
            </t>
        </template>

        <template id="report_picking" inherit_id="stock.report_picking">
            <xpath
                expr="//t[@t-foreach='o.move_ids_without_package']"
                position="attributes"
            >
                <attribute
                    name="t-foreach"
                >o.move_ids_without_package.sorted(key=lambda mlp: mlp.product_id.default_code) if sort_by_default_code else o.move_ids_without_package</attribute>
            </xpath>
        </template>
    </data>
</odoo>
