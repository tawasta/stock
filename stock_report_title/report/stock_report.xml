<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template
        id="report_deliveryslip_title_change"
        inherit_id="stock.report_deliveryslip"
    >
        <xpath expr="//t[@t-foreach='docs']" position="attributes">
            <attribute name="t-as" />
        </xpath>
        <xpath expr="//t[@t-foreach='docs']" position="attributes">
            <attribute name="t-foreach" />
        </xpath>
    </template>

    <template id="stock_report_title.report_deliveryslip">
        <t t-foreach="docs" t-as="o">
            <t t-set="delivery_document_title" t-value="True" />
            <t t-call="stock.report_deliveryslip" t-lang="o.partner_id.lang" />
        </t>
    </template>

    <template
        id="report_picking_informations_title"
        inherit_id="stock_report_element_sizes.report_picking_element_sizes"
    >
        <div id="stock_picking_informations" position="inside">
            <div
                t-if="o.name and o.company_id.show_picking_report_name"
                class="col-auto mw-100 mb-2"
            >
                <span>
                    <strong>Stock Picking:</strong>
                </span>
                <p class="m-0" t-field="o.name" />
            </div>
        </div>
    </template>
    <template
        id="report_delivery_document"
        inherit_id="stock_report_element_sizes.report_delivery_document"
    >
        <div id="stock_deliveryslip_informations" position="inside">
            <div
                t-if="o.name and o.company_id.show_delivery_slip_text"
                class="col-auto mw-100 mb-2"
            >
                <span>
                    <strong>Delivery Slip:</strong>
                </span>
                <p class="m-0" t-field="o.name" />
            </div>
        </div>
    </template>
    <template id="report_picking_title" inherit_id="stock.report_picking">
        <xpath expr="//div[@class='page']" position="before">
            <t t-if="o.company_id.show_picking_text">
                <t t-set="report_title">Stock picking</t>
            </t>
        </xpath>
        <xpath expr="//div[@class='page']//h1" position="attributes">
            <attribute name="class">d-none</attribute>
        </xpath>
    </template>
    <template id="header" inherit_id="web_report_sfs.header">
        <div name="report-title" position="inside">
            <t t-if="company.show_delivery_slip_text and delivery_document_title">
                <t t-if="company.delivery_slip_title">
                    <strong t-field="company.delivery_slip_title" />
                </t>
                <t t-else="">
                    <strong>Delivery Slip</strong>
                </t>
            </t>
        </div>
    </template>

    <template
        id="report_deliveryslip_title"
        inherit_id="stock.report_delivery_document"
    >
        <!-- expr="//h2" doesn't work for some reason -->
        <xpath expr="//h2//span" position="attributes">
            <attribute
                name="t-att-class"
            >'{}'.format('d-none' if not o.company_id.show_delivery_slip_report_name else '')</attribute>
        </xpath>
    </template>
</odoo>
